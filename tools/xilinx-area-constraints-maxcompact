#!/usr/bin/perl
#
# xilinx-area-constraints-maxcompress
#
# Emit Xilinx ``.ucf'' area constraints file (to stdout)
#   for maximum compression (``1%'') of a given instance
#
# Eylon Caspi, 2/26/05 3/24/05


$toolpathslash = ($0 =~ m{(.*/)}) ? $1 : "";


########  Subroutines  ########

sub usage {
  my $name = $0;
  $name =~ s{.*/}{};
  $namespaces = $name;
  $namespaces =~ s/./ /g;
  die
    "$name:  emit Xilinx area constraints (.ucf)\n" .
     $namespaces . "   for maximum compression (1%)\n" .
    "Usage:  $name [-i instance]\n" .
    "        instance = name of EDIF instance to constrain (default: *)\n";
}


########  Cmd line  ########

$instance="*";	# - name of EDIF instance to constrain

# if ($#ARGV<0) { usage(); }

while ($#ARGV >= 0) {
  $arg = shift(@ARGV);
  if    ($arg eq "-i")  { $instance=shift(@ARGV); }
  elsif ($arg =~ /^-/)  { usage(); }
  else                  { usage(); }
}

if ($instance eq "")                                            { usage(); }

# print "instance=$instance\n";


########  Emit Constraints  ########

printf("# Area constraints for maximum compression (``1%'')\n");
printf("# Generated by xilinx-area-constraints, " . `date` . "\n");
printf("INST \"$instance\" AREA_GROUP = \"area_group\" ;\n");
printf("AREA_GROUP \"area_group\" COMPRESSION = 1 ;\n\n")
