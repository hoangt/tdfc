warning: preprocess eos.tdf...
eos.tdf:35: at "done": warning: ignoring return value of builtin "done"
eos.tdf:36: at "done": warning: ignoring return value of builtin "done"
eos.tdf:28: at "done": warning: ignoring return value of builtin "done"
// operator merge

merge (input unsigned[16] a, input unsigned[16] b, output unsigned[16] o)
{
  unsigned[16] ta;
  unsigned[16] tb;

  state start (a,b) :
    if (a<b)
      {
        o=a;
        tb=b;
        goto bpend;
      }
    else
      {
        o=b;
        ta=a;
        goto apend;
      }

  state start (a,eos(b)) :
    {
      o=a;
      goto aonly;
    }

  state start (eos(a),b) :
    {
      o=b;
      goto bonly;
    }

  state start (eos(a),eos(b)) :
    {
      close(o);
      done();
    }

  state aonly (a) :
    {
      o=a;
      stay;
    }

  state aonly (eos(a)) :
    {
      close(o);
      done();
    }

  state apend (b) :
    if (ta<b)
      {
        o=ta;
        tb=b;
        goto bpend;
      }
    else
      {
        o=b;
        ta=ta;
        stay;
      }

  state apend (eos(b)) :
    {
      o=ta;
      goto aonly;
    }

  state bonly (b) :
    {
      o=b;
      stay;
    }

  state bonly (eos(b)) :
    {
      close(o);
      done();
    }

  state bpend (a) :
    if (a<tb)
      {
        o=a;
        tb=tb;
        stay;
      }
    else
      {
        o=tb;
        ta=a;
        goto apend;
      }

  state bpend (eos(a)) :
    {
      o=tb;
      goto bonly;
    }
}

warning: Exiting...
