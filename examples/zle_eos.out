warning: preprocess zle_eos.tdf...
zle_eos.tdf:36: at "done": warning: ignoring return value of builtin "done"
zle_eos.tdf:23: at "=": warning: assignment from type unsigned[8] to type unsigned[7] may lose information
zle_eos.tdf:29: at "done": warning: ignoring return value of builtin "done"
// operator zle_eos

zle_eos (param unsigned[7] maxZeros, input unsigned[7] i, output unsigned[8] o)
{
  unsigned[7] cnt=0;

  state start (i) :
    if (i==0)
      {
        cnt=1;
        goto zeros;
      }
    else
      {
        o=i;
      }

  state pending (i) :
    if (i==0)
      {
        o=i@1;
        cnt=1;
        goto zeros;
      }
    else
      {
        o=i@1;
      }

  state pending (eos(i)) :
    {
      o=i;
      close(o);
      done();
    }

  state zeros (i) :
    if (i==0)
      {
        if (cnt==maxZeros)
          {
            o=128|maxZeros;
            cnt=0;
            goto start;
          }
        else
          {
            cnt=cnt+1;
          }
      }
    else
      {
        o=128|cnt;
        cnt=0;
        goto pending;
      }

  state zeros (eos(i)) :
    {
      o=128|cnt;
      close(o);
      done();
    }
}

warning: Exiting...
